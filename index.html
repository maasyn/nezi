<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Merge 100 - Ğ­Ğ²Ğ¾Ğ»ÑÑ†Ğ¸Ñ</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@300;500;700&display=swap');

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Exo 2', sans-serif;
    background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
    min-height: 100vh;
    overflow-x: hidden;
    color: white;
}

.game-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 20px;
}

.header {
    text-align: center;
    margin-bottom: 20px;
    animation: fadeInDown 0.8s ease;
}

h1 {
    font-family: 'Orbitron', sans-serif;
    font-size: 3.5em;
    text-shadow: 0 0 30px rgba(100, 200, 255, 0.8);
    margin-bottom: 10px;
    background: linear-gradient(45deg, #00f5ff, #ff00ff, #ffff00, #00f5ff);
    background-size: 400% 400%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: gradient 4s ease infinite;
    letter-spacing: 3px;
}

.subtitle {
    font-size: 1.2em;
    opacity: 0.8;
    color: #a0a0ff;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
    margin-bottom: 25px;
    max-width: 1000px;
    margin-left: auto;
    margin-right: auto;
}

.stat-card {
    background: rgba(255,255,255,0.05);
    backdrop-filter: blur(15px);
    padding: 20px;
    border-radius: 20px;
    border: 1px solid rgba(255,255,255,0.1);
    box-shadow: 0 8px 32px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.1);
    transition: all 0.3s;
    position: relative;
    overflow: hidden;
}

.stat-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
    transition: left 0.5s;
}

.stat-card:hover::before {
    left: 100%;
}

.stat-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 40px rgba(0,0,0,0.4);
}

.stat-icon {
    font-size: 2em;
    margin-bottom: 5px;
}

.stat-label {
    font-size: 0.85em;
    opacity: 0.7;
    text-transform: uppercase;
    letter-spacing: 2px;
    margin-bottom: 5px;
}

.stat-value {
    font-size: 1.8em;
    font-weight: bold;
    font-family: 'Orbitron', sans-serif;
}

.coins { color: #ffd700; text-shadow: 0 0 20px rgba(255,215,0,0.5); }
.exp { color: #00f5ff; text-shadow: 0 0 20px rgba(0,245,255,0.5); }
.level { color: #ff00ff; text-shadow: 0 0 20px rgba(255,0,255,0.5); }
.prestige { color: #ff6b6b; text-shadow: 0 0 20px rgba(255,107,107,0.5); }

.progress-container {
    margin-top: 10px;
}

.progress-bar {
    width: 100%;
    height: 8px;
    background: rgba(0,0,0,0.3);
    border-radius: 10px;
    overflow: hidden;
    position: relative;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #00f5ff, #ff00ff);
    transition: width 0.5s ease;
    box-shadow: 0 0 15px rgba(0,245,255,0.5);
    position: relative;
}

.progress-fill::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    animation: shimmer 2s infinite;
}

.game-area {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
    gap: 12px;
    max-width: 900px;
    margin: 0 auto 30px;
    padding: 25px;
    background: rgba(0,0,0,0.2);
    border-radius: 25px;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,0.1);
    position: relative;
}

.item {
    aspect-ratio: 1;
    border-radius: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    position: relative;
    overflow: hidden;
    font-weight: bold;
    font-size: 1.1em;
    box-shadow: 0 6px 20px rgba(0,0,0,0.4), inset 0 2px 0 rgba(255,255,255,0.2);
    border: 2px solid rgba(255,255,255,0.2);
    user-select: none;
}

.item::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(255,255,255,0.4) 0%, transparent 50%, rgba(0,0,0,0.2) 100%);
    pointer-events: none;
}

.item::after {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.3), transparent 50%);
    pointer-events: none;
}

.item:hover {
    transform: scale(1.15) rotate(5deg);
    z-index: 10;
    box-shadow: 0 12px 30px rgba(0,0,0,0.6);
}

.item.selected {
    animation: pulse 0.6s infinite alternate;
    border-color: #fff;
    box-shadow: 0 0 40px rgba(255,255,255,0.8), inset 0 0 20px rgba(255,255,255,0.3);
}

.item.merging {
    animation: mergePop 0.7s ease;
}

.item-locked {
    opacity: 0.3;
    cursor: not-allowed;
    filter: grayscale(100%);
}

.item-level {
    font-size: 1.3em;
    z-index: 1;
    font-family: 'Orbitron', sans-serif;
    text-shadow: 0 2px 4px rgba(0,0,0,0.5);
}

.item-icon {
    font-size: 2.5em;
    margin-bottom: 5px;
    z-index: 1;
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.5));
}

.item-income {
    font-size: 0.75em;
    opacity: 0.9;
    z-index: 1;
    margin-top: 2px;
}

.controls {
    text-align: center;
    margin-bottom: 25px;
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 15px;
}

.btn {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border: none;
    color: white;
    padding: 15px 30px;
    font-size: 1em;
    border-radius: 50px;
    cursor: pointer;
    transition: all 0.3s;
    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
    text-transform: uppercase;
    letter-spacing: 1px;
    font-weight: bold;
    font-family: 'Exo 2', sans-serif;
    position: relative;
    overflow: hidden;
}

.btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    transition: left 0.5s;
}

.btn:hover::before {
    left: 100%;
}

.btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 30px rgba(102, 126, 234, 0.6);
}

.btn:active {
    transform: translateY(-1px);
}

.btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
    transform: none;
}

.btn-success {
    background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
    box-shadow: 0 6px 20px rgba(17, 153, 142, 0.4);
}

.btn-warning {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    box-shadow: 0 6px 20px rgba(240, 147, 251, 0.4);
}

.btn-legendary {
    background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
    box-shadow: 0 6px 20px rgba(250, 112, 154, 0.4);
    animation: glow 2s ease-in-out infinite alternate;
}

.shop {
    background: rgba(255,255,255,0.03);
    border-radius: 25px;
    padding: 25px;
    margin-top: 20px;
    backdrop-filter: blur(15px);
    border: 1px solid rgba(255,255,255,0.1);
}

.shop h2 {
    text-align: center;
    margin-bottom: 25px;
    color: #ffd700;
    font-family: 'Orbitron', sans-serif;
    font-size: 1.8em;
    text-shadow: 0 0 20px rgba(255,215,0,0.5);
}

.shop-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 20px;
    max-width: 1000px;
    margin: 0 auto;
}

.shop-item {
    background: rgba(255,255,255,0.05);
    padding: 20px;
    border-radius: 20px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s;
    border: 2px solid transparent;
    position: relative;
    overflow: hidden;
}

.shop-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, transparent, rgba(255,255,255,0.05), transparent);
    opacity: 0;
    transition: opacity 0.3s;
}

.shop-item:hover::before {
    opacity: 1;
}

.shop-item:hover {
    border-color: #00f5ff;
    transform: translateY(-8px);
    background: rgba(255,255,255,0.1);
    box-shadow: 0 15px 40px rgba(0,245,255,0.2);
}

.shop-item.disabled {
    opacity: 0.4;
    cursor: not-allowed;
    transform: none;
}

.shop-item-icon {
    font-size: 3em;
    margin-bottom: 10px;
}

.shop-item-name {
    font-weight: bold;
    margin-bottom: 5px;
    font-size: 1.1em;
}

.shop-item-desc {
    font-size: 0.85em;
    opacity: 0.7;
    margin-bottom: 10px;
}

.shop-item-cost {
    color: #ffd700;
    font-weight: bold;
    font-size: 1.2em;
    font-family: 'Orbitron', sans-serif;
}

.floating-text {
    position: fixed;
    pointer-events: none;
    font-weight: bold;
    font-size: 1.4em;
    animation: floatUp 1.2s ease-out forwards;
    z-index: 1000;
    text-shadow: 0 0 20px rgba(0,0,0,0.8);
    font-family: 'Orbitron', sans-serif;
}

.victory-screen {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.95);
    display: none;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    z-index: 2000;
    animation: fadeIn 0.5s;
}

.victory-screen.active {
    display: flex;
}

.victory-title {
    font-size: 4em;
    background: linear-gradient(45deg, #ffd700, #ff00ff, #00f5ff, #ffd700);
    background-size: 400% 400%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: gradient 3s ease infinite;
    margin-bottom: 20px;
    text-align: center;
    font-family: 'Orbitron', sans-serif;
}

.prestige-screen {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.95);
    display: none;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    z-index: 2000;
    animation: fadeIn 0.5s;
}

.prestige-screen.active {
    display: flex;
}

.achievement-popup {
    position: fixed;
    top: 20px;
    right: -400px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    padding: 20px 30px;
    border-radius: 15px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.5);
    transition: right 0.5s ease;
    z-index: 1500;
    max-width: 350px;
}

.achievement-popup.show {
    right: 20px;
}

.achievement-title {
    font-weight: bold;
    font-size: 1.2em;
    margin-bottom: 5px;
    color: #ffd700;
}

.particles {
    position: fixed;
    top: 0;
    left: 0;
    pointer-events: none;
    z-index: 999;
}

.particle {
    position: absolute;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    animation: particleFloat 1.2s ease-out forwards;
}

.info-panel {
    text-align: center;
    margin-bottom: 20px;
    padding: 20px;
    background: rgba(255,255,255,0.05);
    border-radius: 20px;
    font-size: 1em;
    line-height: 1.6;
    border: 1px solid rgba(255,255,255,0.1);
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
}

.max-level {
    animation: rainbow 3s linear infinite;
}

.combo-indicator {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 4em;
    font-weight: bold;
    font-family: 'Orbitron', sans-serif;
    pointer-events: none;
    opacity: 0;
    z-index: 999;
    text-shadow: 0 0 40px rgba(255,215,0,0.8);
}

.combo-indicator.show {
    animation: comboPop 1s ease-out forwards;
}

@keyframes pulse {
    from { transform: scale(1); }
    to { transform: scale(1.08); }
}

@keyframes mergePop {
    0% { transform: scale(1); filter: brightness(1); }
    50% { transform: scale(1.4); filter: brightness(1.8); }
    100% { transform: scale(1); filter: brightness(1); }
}

@keyframes floatUp {
    0% { opacity: 1; transform: translateY(0) scale(1); }
    50% { opacity: 1; transform: translateY(-50px) scale(1.2); }
    100% { opacity: 0; transform: translateY(-120px) scale(1.5); }
}

@keyframes fadeInDown {
    from { opacity: 0; transform: translateY(-30px); }
    to { opacity: 1; transform: translateY(0); }
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes gradient {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

@keyframes shimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

@keyframes rainbow {
    0% { filter: hue-rotate(0deg); }
    100% { filter: hue-rotate(360deg); }
}

@keyframes glow {
    from { box-shadow: 0 6px 20px rgba(250, 112, 154, 0.4); }
    to { box-shadow: 0 6px 30px rgba(250, 112, 154, 0.8), 0 0 40px rgba(254, 225, 64, 0.4); }
}

@keyframes comboPop {
    0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
    20% { opacity: 1; transform: translate(-50%, -50%) scale(1.3); }
    80% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
    100% { opacity: 0; transform: translate(-50%, -80%) scale(0.8); }
}

@media (max-width: 768px) {
    h1 { font-size: 2em; }
    .game-area { grid-template-columns: repeat(4, 1fr); gap: 8px; padding: 15px; }
    .item-icon { font-size: 1.8em; }
    .shop-grid { grid-template-columns: 1fr; }
}
</style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1>ğŸ”¥ MERGE 100 ğŸ”¥</h1>
            <p class="subtitle">Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ»ĞµĞ³ĞµĞ½Ğ´Ğ°Ñ€Ğ½Ñ‹Ğ¹ Ğ°Ñ€Ñ‚ĞµÑ„Ğ°ĞºÑ‚ 100 ÑƒÑ€Ğ¾Ğ²Ğ½Ñ!</p>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">ğŸ’°</div>
                <div class="stat-label">ĞœĞ¾Ğ½ĞµÑ‚Ñ‹</div>
                <div class="stat-value coins" id="coins">50</div>
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="coin-progress" style="width: 0%"></div>
                    </div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">â­</div>
                <div class="stat-label">ĞĞ¿Ñ‹Ñ‚</div>
                <div class="stat-value exp" id="exp">0</div>
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="exp-progress" style="width: 0%"></div>
                    </div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">ğŸ†</div>
                <div class="stat-label">ĞœĞ°ĞºÑ. Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ</div>
                <div class="stat-value level" id="max-level">1</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">ğŸ’</div>
                <div class="stat-label">ĞÑ‡ĞºĞ¸ ĞŸÑ€ĞµÑÑ‚Ğ¸Ğ¶Ğ°</div>
                <div class="stat-value prestige" id="prestige-points">0</div>
            </div>
        </div>

        <div class="info-panel">
            ğŸ’¡ <strong>ĞšĞ°Ğº Ğ¸Ğ³Ñ€Ğ°Ñ‚ÑŒ:</strong> Ğ’Ñ‹Ğ±Ğ¸Ñ€Ğ°Ğ¹Ñ‚Ğµ Ğ´Ğ²Ğ° Ğ¾Ğ´Ğ¸Ğ½Ğ°ĞºĞ¾Ğ²Ñ‹Ñ… Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ğ° Ğ´Ğ»Ñ ÑĞ»Ğ¸ÑĞ½Ğ¸Ñ. 
            Ğ§ĞµĞ¼ Ğ²Ñ‹ÑˆĞµ ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ, Ñ‚ĞµĞ¼ Ğ±Ğ¾Ğ»ÑŒÑˆĞµ Ğ´Ğ¾Ñ…Ğ¾Ğ´! Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğ¹ Ğ´Ğ¾Ñ…Ğ¾Ğ´: <span id="income-display" style="color: #ffd700; font-weight: bold;">1</span> Ğ¼Ğ¾Ğ½ĞµÑ‚/ÑĞµĞº
            <br><span id="combo-text" style="color: #ff00ff; font-weight: bold;"></span>
        </div>

        <div class="controls">
            <button class="btn" onclick="game.spawnItem()" id="spawn-btn">
                ğŸ² Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚ (10ğŸ’°)
            </button>
            <button class="btn btn-success" onclick="game.mergeAll()" id="merge-all-btn">
                âš¡ Ğ¡Ğ»Ğ¸Ñ‚ÑŒ Ğ²ÑÑ‘ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾Ğµ
            </button>
            <button class="btn btn-warning" onclick="game.buyAutoMerge()" id="auto-merge-btn">
                ğŸ¤– ĞĞ²Ñ‚Ğ¾-ÑĞ»Ğ¸ÑĞ½Ğ¸Ğµ (1000ğŸ’°)
            </button>
            <button class="btn btn-legendary" onclick="game.prestige()" id="prestige-btn" style="display: none;">
                ğŸ’ ĞŸĞ Ğ•Ğ¡Ğ¢Ğ˜Ğ– (Ğ¡Ğ±Ñ€Ğ¾Ñ Ñ Ğ±Ğ¾Ğ½ÑƒÑĞ¾Ğ¼)
            </button>
        </div>

        <div class="game-area" id="game-area"></div>

        <div class="shop">
            <h2>ğŸ›’ ĞœĞ°Ğ³Ğ°Ğ·Ğ¸Ğ½ Ğ£Ğ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ğ¹</h2>
            <div class="shop-grid">
                <div class="shop-item" onclick="game.buySlot()" id="shop-slot">
                    <div class="shop-item-icon">ğŸ“¦</div>
                    <div class="shop-item-name">ĞĞ¾Ğ²Ñ‹Ğ¹ Ğ¡Ğ»Ğ¾Ñ‚</div>
                    <div class="shop-item-desc">+1 Ğ¼ĞµÑÑ‚Ğ¾ Ğ´Ğ»Ñ Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ğ¾Ğ²</div>
                    <div class="shop-item-cost">ğŸ’° <span id="slot-cost">100</span></div>
                </div>
                <div class="shop-item" onclick="game.boostIncome()" id="shop-boost">
                    <div class="shop-item-icon">âš¡</div>
                    <div class="shop-item-name">Ğ£ÑĞ¸Ğ»Ğ¸Ñ‚ĞµĞ»ÑŒ Ğ”Ğ¾Ñ…Ğ¾Ğ´Ğ°</div>
                    <div class="shop-item-desc">Ğ£Ğ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ğ²Ğ°ĞµÑ‚ Ğ´Ğ¾Ñ…Ğ¾Ğ´ Ğ² 2 Ñ€Ğ°Ğ·Ğ°</div>
                    <div class="shop-item-cost">ğŸ’° <span id="boost-cost">500</span></div>
                </div>
                <div class="shop-item" onclick="game.buyCriticalChance()" id="shop-crit">
                    <div class="shop-item-icon">ğŸ¯</div>
                    <div class="shop-item-name">ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¨Ğ°Ğ½Ñ</div>
                    <div class="shop-item-desc">Ğ¨Ğ°Ğ½Ñ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ +1 ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ Ğ¿Ñ€Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğ¸</div>
                    <div class="shop-item-cost">ğŸ’° <span id="crit-cost">2000</span></div>
                </div>
                <div class="shop-item" onclick="game.buyTimeWarp()" id="shop-warp">
                    <div class="shop-item-icon">â°</div>
                    <div class="shop-item-name">Ğ’Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾Ğ¹ Ğ¡ĞºĞ°Ñ‡Ğ¾Ğº</div>
                    <div class="shop-item-desc">ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ 5 Ğ¼Ğ¸Ğ½ÑƒÑ‚ Ğ´Ğ¾Ñ…Ğ¾Ğ´Ğ° Ğ¼Ğ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ğ¾</div>
                    <div class="shop-item-cost">ğŸ’° <span id="warp-cost">5000</span></div>
                </div>
            </div>
        </div>
    </div>

    <div class="victory-screen" id="victory">
        <div class="victory-title">ğŸ‰ ĞŸĞĞ‘Ğ•Ğ”Ğ! ğŸ‰</div>
        <p style="font-size: 1.5em; margin-bottom: 20px;">Ğ’Ñ‹ ÑĞ¾Ğ·Ğ´Ğ°Ğ»Ğ¸ Ğ°Ñ€Ñ‚ĞµÑ„Ğ°ĞºÑ‚ 100 ÑƒÑ€Ğ¾Ğ²Ğ½Ñ!</p>
        <p style="font-size: 1.2em; margin-bottom: 10px;">Ğ¤Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑÑ‡Ñ‘Ñ‚: <span id="final-score" style="color: #ffd700;"></span></p>
        <p style="font-size: 1.1em; margin-bottom: 30px; opacity: 0.8;">ĞÑ‡ĞºĞ¸ Ğ¿Ñ€ĞµÑÑ‚Ğ¸Ğ¶Ğ°: +<span id="victory-prestige" style="color: #ff6b6b;"></span></p>
        <button class="btn btn-legendary" onclick="game.continueAfterVictory()">ğŸš€ ĞŸÑ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ¸Ñ‚ÑŒ Ğ¸Ğ³Ñ€Ñƒ</button>
        <button class="btn" onclick="location.reload()" style="margin-top: 15px;">ğŸ”„ ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ½Ğ¾Ğ²Ğ¾</button>
    </div>

    <div class="prestige-screen" id="prestige-screen">
        <div class="victory-title">ğŸ’ ĞŸĞ Ğ•Ğ¡Ğ¢Ğ˜Ğ– ğŸ’</div>
        <p style="font-size: 1.3em; margin-bottom: 20px; max-width: 600px; text-align: center;">
            Ğ¡Ğ±Ñ€Ğ¾ÑÑŒÑ‚Ğµ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ <span style="color: #ff6b6b; font-weight: bold;">ĞÑ‡ĞºĞ¸ ĞŸÑ€ĞµÑÑ‚Ğ¸Ğ¶Ğ°</span>!<br>
            ĞšĞ°Ğ¶Ğ´Ğ¾Ğµ Ğ¾Ñ‡ĞºĞ¾ Ğ´Ğ°Ñ‘Ñ‚ <span style="color: #ffd700;">+10%</span> Ğº Ğ´Ğ¾Ñ…Ğ¾Ğ´Ñƒ Ğ½Ğ°Ğ²ÑĞµĞ³Ğ´Ğ°.
        </p>
        <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; margin-bottom: 30px;">
            <p>Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğ¹ Ğ¼Ğ½Ğ¾Ğ¶Ğ¸Ñ‚ĞµĞ»ÑŒ: <span id="current-multiplier" style="color: #00f5ff; font-size: 1.3em;">1.0x</span></p>
            <p>ĞŸĞ¾ÑĞ»Ğµ Ğ¿Ñ€ĞµÑÑ‚Ğ¸Ğ¶Ğ°: <span id="new-multiplier" style="color: #ffd700; font-size: 1.3em;">1.0x</span></p>
            <p>ĞÑ‡ĞºĞ¸ Ğ¿Ñ€ĞµÑÑ‚Ğ¸Ğ¶Ğ°: +<span id="prestige-gain" style="color: #ff6b6b; font-size: 1.3em;">0</span></p>
        </div>
        <button class="btn btn-legendary" onclick="game.confirmPrestige()">ğŸ’ ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚ÑŒ ĞŸÑ€ĞµÑÑ‚Ğ¸Ğ¶</button>
        <button class="btn" onclick="game.closePrestige()" style="margin-top: 15px;">âŒ ĞÑ‚Ğ¼ĞµĞ½Ğ°</button>
    </div>

    <div class="achievement-popup" id="achievement">
        <div class="achievement-title">ğŸ† Ğ”Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ Ñ€Ğ°Ğ·Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾!</div>
        <div id="achievement-text">Ğ¢ĞµĞºÑÑ‚ Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ</div>
    </div>

    <div class="combo-indicator" id="combo">COMBO x2!</div>

    <canvas class="particles" id="particles"></canvas>

    <script>
        class Game {
            constructor() {
                this.coins = 50;
                this.exp = 0;
                this.maxLevel = 1;
                this.items = [];
                this.selectedIndex = null;
                this.slots = 10;
                this.incomeMultiplier = 1;
                this.prestigeMultiplier = 1;
                this.prestigePoints = 0;
                this.baseIncome = 1;
                this.lastIncome = 0;
                this.autoMergeUnlocked = false;
                this.autoMergeInterval = null;
                this.criticalChance = 0;
                this.comboCount = 0;
                this.lastMergeTime = 0;
                this.achievements = new Set();
                this.victoryAchieved = false;
                
                this.costs = {
                    slot: 100,
                    boost: 500,
                    autoMerge: 1000,
                    crit: 2000,
                    warp: 5000
                };
                
                this.levelEmojis = {
                    1: 'ğŸŒ±', 2: 'ğŸŒ¿', 3: 'ğŸ€', 4: 'ğŸŒ²', 5: 'ğŸŒ³',
                    6: 'ğŸŒ´', 7: 'ğŸ‹', 8: 'ğŸ„', 9: 'ğŸŒµ', 10: 'âš¡',
                    11: 'ğŸ”¥', 12: 'ğŸ’§', 13: 'â„ï¸', 14: 'ğŸŒªï¸', 15: 'ğŸŒˆ',
                    16: 'â˜€ï¸', 17: 'ğŸŒ™', 18: 'â­', 19: 'ğŸŒŸ', 20: 'ğŸ’«',
                    21: 'ğŸª', 22: 'ğŸŒ', 23: 'ğŸŒ ', 24: 'ğŸ¯', 25: 'ğŸª',
                    26: 'ğŸ¨', 27: 'ğŸ­', 28: 'ğŸ°', 29: 'ğŸ²', 30: 'ğŸ”®',
                    31: 'ğŸ’', 32: 'ğŸ’', 33: 'ğŸ‘‘', 34: 'ğŸ†', 35: 'ğŸ–ï¸',
                    36: 'ğŸ…', 37: 'ğŸ¥‡', 38: 'ğŸ¥ˆ', 39: 'ğŸ¥‰', 40: 'âšœï¸',
                    41: 'ğŸ”±', 42: 'âš–ï¸', 43: 'ğŸ—ï¸', 44: 'ğŸ›¡ï¸', 45: 'âš”ï¸',
                    46: 'ğŸ¹', 47: 'ğŸ”«', 48: 'ğŸ’£', 49: 'ğŸ§ª', 50: 'âš—ï¸',
                    51: 'ğŸ”­', 52: 'ğŸ”¬', 53: 'ğŸ“¡', 54: 'ğŸš€', 55: 'ğŸ›¸',
                    56: 'ğŸŒŒ', 57: 'ğŸ‘½', 58: 'ğŸ¤–', 59: 'ğŸ‘¾', 60: 'ğŸ®',
                    61: 'ğŸ•¹ï¸', 62: 'ğŸ’»', 63: 'ğŸ“±', 64: 'ğŸ’¾', 65: 'ğŸ’¿',
                    66: 'ğŸ“€', 67: 'ğŸµ', 68: 'ğŸ¶', 69: 'ğŸ¼', 70: 'ğŸ¹',
                    71: 'ğŸ¸', 72: 'ğŸº', 73: 'ğŸ»', 74: 'ğŸ“¯', 75: 'ğŸ””',
                    76: 'ğŸ•¯ï¸', 77: 'ğŸ’¡', 78: 'ğŸ”¦', 79: 'ğŸ®', 80: 'ğŸ†',
                    81: 'ğŸ‡', 82: 'âœ¨', 83: 'ğŸˆ', 84: 'ğŸ‰', 85: 'ğŸŠ',
                    86: 'ğŸ‹', 87: 'ğŸ', 88: 'ğŸ', 89: 'ğŸ', 90: 'ğŸ',
                    91: 'ğŸ‘', 92: 'ğŸ§§', 93: 'ğŸ€', 94: 'ğŸ', 95: 'ğŸ—ï¸',
                    96: 'ğŸ·ï¸', 97: 'ğŸ“›', 98: 'ğŸ”–', 99: 'ğŸ“Œ', 100: 'ğŸ‘‘'
                };
                
                this.init();
            }

            init() {
                this.render();
                this.startIncome();
                this.spawnInitialItems();
                this.checkPrestigeAvailability();
            }

            spawnInitialItems() {
                for (let i = 0; i < 4; i++) {
                    this.items.push({ level: 1, id: Date.now() + i });
                }
                this.render();
            }

            getItemColor(level) {
                if (level >= 100) return `linear-gradient(45deg, #ffd700, #ff00ff, #00f5ff, #ffd700)`;
                if (level >= 90) return `linear-gradient(45deg, #ff006e, #8338ec, #3a86ff, #ff006e)`;
                if (level >= 80) return `linear-gradient(45deg, #f72585, #7209b7, #3a0ca3, #f72585)`;
                if (level >= 70) return `linear-gradient(45deg, #ff006e, #ffbe0b, #fb5607, #ff006e)`;
                if (level >= 60) return `linear-gradient(45deg, #00f5ff, #00bbf9, #00f5d4, #00f5ff)`;
                if (level >= 50) return `linear-gradient(45deg, #9b5de5, #f15bb5, #00bbf9, #9b5de5)`;
                if (level >= 40) return `linear-gradient(45deg, #00bbf9, #00f5d4, #fee440, #00bbf9)`;
                if (level >= 30) return `linear-gradient(45deg, #f15bb5, #fee440, #00f5d4, #f15bb5)`;
                if (level >= 20) return `linear-gradient(45deg, #9b5de5, #00bbf9, #00f5d4, #9b5de5)`;
                if (level >= 10) return `linear-gradient(45deg, #2ecc71, #3498db, #9b59b6, #2ecc71)`;
                
                const colors = [
                    '#2ecc71', '#27ae60', '#229954', '#1e8449', '#1abc9c',
                    '#16a085', '#3498db', '#2980b9', '#9b59b6', '#8e44ad'
                ];
                return colors[(level - 1) % colors.length];
            }

            getItemEmoji(level) {
                return this.levelEmojis[level] || 'âœ¨';
            }

            formatNumber(num) {
                if (num >= 1e100) return num.toExponential(2);
                if (num >= 1e18) return (num / 1e18).toFixed(1) + 'Qi';
                if (num >= 1e15) return (num / 1e15).toFixed(1) + 'Qa';
                if (num >= 1e12) return (num / 1e12).toFixed(1) + 'T';
                if (num >= 1e9) return (num / 1e9).toFixed(1) + 'B';
                if (num >= 1e6) return (num / 1e6).toFixed(1) + 'M';
                if (num >= 1e3) return (num / 1e3).toFixed(1) + 'K';
                return Math.floor(num).toString();
            }

            getIncome() {
                let income = 0;
                this.items.forEach(item => {
                    income += Math.pow(1.8, item.level - 1) * (1 + item.level * 0.1);
                });
                return income * this.incomeMultiplier * this.prestigeMultiplier;
            }

            startIncome() {
                setInterval(() => {
                    const income = this.getIncome();
                    this.coins += income;
                    this.lastIncome = income;
                    this.updateUI();
                }, 1000);
            }

            spawnItem() {
                if (this.items.length >= this.slots) {
                    this.showFloatingText('ĞĞµÑ‚ Ğ¼ĞµÑÑ‚Ğ°!', window.innerWidth/2, window.innerHeight/2, '#ff6b6b');
                    return;
                }
                if (this.coins < 10) {
                    this.showFloatingText('ĞĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ Ğ¼Ğ¾Ğ½ĞµÑ‚!', window.innerWidth/2, window.innerHeight/2, '#ff6b6b');
                    return;
                }
                
                this.coins -= 10;
                
                let level = 1;
                const rand = Math.random();
                
                if (rand < this.criticalChance) {
                    level = Math.min(5, Math.floor(this.maxLevel / 3) + 1);
                    this.showFloatingText('ĞšĞ Ğ˜Ğ¢! +' + level + ' ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ!', window.innerWidth/2, window.innerHeight/2 - 50, '#ff00ff');
                } else if (rand > 0.95 && this.maxLevel >= 10) {
                    level = Math.min(5, Math.floor(this.maxLevel / 4));
                } else if (rand > 0.85 && this.maxLevel >= 5) {
                    level = Math.min(3, Math.floor(this.maxLevel / 5));
                } else if (rand > 0.7 && this.maxLevel >= 3) {
                    level = 2;
                }
                
                this.items.push({ level, id: Date.now() });
                this.render();
                this.createParticles(window.innerWidth/2, window.innerHeight/2);
            }

            selectItem(index) {
                if (this.selectedIndex === null) {
                    this.selectedIndex = index;
                    this.render();
                } else if (this.selectedIndex === index) {
                    this.selectedIndex = null;
                    this.render();
                } else {
                    this.tryMerge(this.selectedIndex, index);
                    this.selectedIndex = null;
                }
            }

            tryMerge(idx1, idx2) {
                const item1 = this.items[idx1];
                const item2 = this.items[idx2];

                if (item1.level === item2.level) {
                    const newLevel = item1.level + 1;
                    const rect = document.querySelector(`[data-index="${idx2}"]`)?.getBoundingClientRect();
                    const x = rect ? rect.left + 50 : window.innerWidth/2;
                    const y = rect ? rect.top : window.innerHeight/2;
                    
                    const now = Date.now();
                    if (now - this.lastMergeTime < 2000) {
                        this.comboCount++;
                    } else {
                        this.comboCount = 1;
                    }
                    this.lastMergeTime = now;
                    
                    const comboBonus = Math.min(this.comboCount, 5);
                    if (comboBonus > 1) {
                        this.showCombo(comboBonus);
                    }
                    
                    const expGain = newLevel * 10 * comboBonus;
                    const coinBonus = Math.pow(2, newLevel) * comboBonus;
                    
                    this.exp += expGain;
                    this.coins += coinBonus;
                    
                    if (newLevel > this.maxLevel) {
                        this.maxLevel = newLevel;
                        this.checkAchievements('level', newLevel);
                        this.showFloatingText(`ĞĞ¾Ğ²Ñ‹Ğ¹ Ñ€ĞµĞºĞ¾Ñ€Ğ´: ${newLevel}!`, x, y - 20, '#ffd700');
                    }
                    
                    this.showFloatingText(`+${this.formatNumber(coinBonus)}ğŸ’°`, x, y + 10, '#ffd700');
                    this.showFloatingText(`+${expGain}â­`, x, y + 40, '#00f5ff');
                    
                    if (comboBonus > 1) {
                        this.showFloatingText(`COMBO x${comboBonus}!`, x, y + 70, '#ff00ff');
                    }
                    
                    const newItems = this.items.filter((_, i) => i !== idx1 && i !== idx2);
                    newItems.push({ level: newLevel, id: Date.now() });
                    this.items = newItems;
                    
                    this.createParticles(x, y + 50);
                    
                    if (newLevel >= 100 && !this.victoryAchieved) {
                        this.victory();
                    }
                    
                    this.checkPrestigeAvailability();
                    this.render();
                } else {
                    this.showFloatingText('Ğ Ğ°Ğ·Ğ½Ñ‹Ğµ ÑƒÑ€Ğ¾Ğ²Ğ½Ğ¸!', window.innerWidth/2, window.innerHeight/2, '#ff6b6b');
                    this.comboCount = 0;
                    this.selectedIndex = null;
                    this.render();
                }
            }

            mergeAll() {
                let merged = false;
                let iterations = 0;
                const maxIterations = 50;
                
                do {
                    merged = false;
                    const levels = {};
                    
                    this.items.forEach((item, idx) => {
                        if (!levels[item.level]) levels[item.level] = [];
                        levels[item.level].push(idx);
                    });
                    
                    for (let level in levels) {
                        while (levels[level].length >= 2) {
                            const idx1 = levels[level].shift();
                            const idx2 = levels[level].shift();
                            this.tryMerge(idx1, idx2);
                            merged = true;
                            
                            Object.keys(levels).forEach(l => {
                                levels[l] = levels[l].map(i => {
                                    if (i > idx1 && i > idx2) return i - 2;
                                    if (i > idx1 || i > idx2) return i - 1;
                                    return i;
                                });
                            });
                            break;
                        }
                        if (merged) break;
                    }
                    iterations++;
                } while (merged && iterations < maxIterations);
                
                if (iterations === 1 && !merged) {
                    this.showFloatingText('ĞĞµÑ‚ Ğ¿Ğ°Ñ€ Ğ´Ğ»Ñ ÑĞ»Ğ¸ÑĞ½Ğ¸Ñ!', window.innerWidth/2, window.innerHeight/2, '#ff6b6b');
                }
            }

            buySlot() {
                if (this.coins >= this.costs.slot) {
                    this.coins -= this.costs.slot;
                    this.slots++;
                    this.costs.slot = Math.floor(this.costs.slot * 1.6);
                    this.render();
                    this.showFloatingText('+1 ÑĞ»Ğ¾Ñ‚!', window.innerWidth/2, window.innerHeight/2, '#00f5ff');
                }
            }

            boostIncome() {
                if (this.coins >= this.costs.boost) {
                    this.coins -= this.costs.boost;
                    this.incomeMultiplier *= 2;
                    this.costs.boost = Math.floor(this.costs.boost * 2.5);
                    this.render();
                    this.showFloatingText('Ğ”Ğ¾Ñ…Ğ¾Ğ´ x2!', window.innerWidth/2, window.innerHeight/2, '#ffd700');
                }
            }

            buyAutoMerge() {
                if (this.autoMergeUnlocked) return;
                if (this.coins >= this.costs.autoMerge) {
                    this.coins -= this.costs.autoMerge;
                    this.autoMergeUnlocked = true;
                    this.startAutoMerge();
                    this.render();
                    this.showFloatingText('ĞĞ²Ñ‚Ğ¾-ÑĞ»Ğ¸ÑĞ½Ğ¸Ğµ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾!', window.innerWidth/2, window.innerHeight/2, '#ff00ff');
                }
            }

            buyCriticalChance() {
                if (this.coins >= this.costs.crit && this.criticalChance < 0.5) {
                    this.coins -= this.costs.crit;
                    this.criticalChance = Math.min(0.5, this.criticalChance + 0.05);
                    this.costs.crit = Math.floor(this.costs.crit * 1.8);
                    this.render();
                    this.showFloatingText(`Ğ¨Ğ°Ğ½Ñ ĞºÑ€Ğ¸Ñ‚Ğ°: ${(this.criticalChance * 100).toFixed(0)}%`, window.innerWidth/2, window.innerHeight/2, '#ff6b6b');
                }
            }

            buyTimeWarp() {
                if (this.coins >= this.costs.warp) {
                    this.coins -= this.costs.warp;
                    const warpIncome = this.getIncome() * 300;
                    this.coins += warpIncome;
                    this.costs.warp = Math.floor(this.costs.warp * 1.5);
                    this.render();
                    this.showFloatingText(`+${this.formatNumber(warpIncome)}ğŸ’°`, window.innerWidth/2, window.innerHeight/2, '#ffd700');
                    this.createParticles(window.innerWidth/2, window.innerHeight/2);
                }
            }

            startAutoMerge() {
                this.autoMergeInterval = setInterval(() => {
                    const levels = {};
                    this.items.forEach((item, idx) => {
                        if (!levels[item.level]) levels[item.level] = [];
                        levels[item.level].push(idx);
                    });
                    
                    for (let level in levels) {
                        if (levels[level].length >= 2) {
                            this.tryMerge(levels[level][0], levels[level][1]);
                            break;
                        }
                    }
                }, 3000);
            }

            checkPrestigeAvailability() {
                const btn = document.getElementById('prestige-btn');
                if (this.maxLevel >= 25) {
                    btn.style.display = 'inline-block';
                }
            }

            prestige() {
                const gain = Math.floor(Math.pow(this.maxLevel, 1.5) / 10);
                document.getElementById('current-multiplier').textContent = this.prestigeMultiplier.toFixed(1) + 'x';
                document.getElementById('new-multiplier').textContent = (this.prestigeMultiplier + gain * 0.1).toFixed(1) + 'x';
                document.getElementById('prestige-gain').textContent = gain;
                document.getElementById('prestige-screen').classList.add('active');
            }

            confirmPrestige() {
                const gain = Math.floor(Math.pow(this.maxLevel, 1.5) / 10);
                this.prestigePoints += gain;
                this.prestigeMultiplier += gain * 0.1;
                
                this.coins = 50;
                this.exp = 0;
                this.maxLevel = 1;
                this.items = [];
                this.selectedIndex = null;
                this.slots = 10;
                this.incomeMultiplier = 1;
                this.criticalChance = 0;
                this.comboCount = 0;
                
                this.costs = {
                    slot: 100,
                    boost: 500,
                    autoMerge: 1000,
                    crit: 2000,
                    warp: 5000
                };
                
                if (this.autoMergeInterval) {
                    clearInterval(this.autoMergeInterval);
                    this.autoMergeInterval = null;
                }
                this.autoMergeUnlocked = false;
                
                this.closePrestige();
                this.spawnInitialItems();
                this.render();
                this.showFloatingText(`ĞŸÑ€ĞµÑÑ‚Ğ¸Ğ¶ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½! +${gain} Ğ¾Ñ‡ĞºĞ¾Ğ²`, window.innerWidth/2, window.innerHeight/2, '#ff6b6b');
            }

            closePrestige() {
                document.getElementById('prestige-screen').classList.remove('active');
            }

            checkAchievements(type, value) {
                const achievements = [
                    { id: 'level10', check: () => this.maxLevel >= 10, text: 'Ğ”Ğ¾ÑÑ‚Ğ¸Ğ³Ğ½ÑƒÑ‚ 10 ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ!' },
                    { id: 'level25', check: () => this.maxLevel >= 25, text: 'Ğ”Ğ¾ÑÑ‚Ğ¸Ğ³Ğ½ÑƒÑ‚ 25 ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ!' },
                    { id: 'level50', check: () => this.maxLevel >= 50, text: 'Ğ”Ğ¾ÑÑ‚Ğ¸Ğ³Ğ½ÑƒÑ‚ 50 ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ!' },
                    { id: 'level75', check: () => this.maxLevel >= 75, text: 'Ğ”Ğ¾ÑÑ‚Ğ¸Ğ³Ğ½ÑƒÑ‚ 75 ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ!' },
                    { id: 'rich', check: () => this.coins >= 1000000, text: 'ĞœĞ¸Ğ»Ğ»Ğ¸Ğ¾Ğ½ĞµÑ€!' },
                    { id: 'slots', check: () => this.slots >= 20, text: 'ĞšĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ğ¾Ğ½ĞµÑ€!' }
                ];
                
                achievements.forEach(ach => {
                    if (!this.achievements.has(ach.id) && ach.check()) {
                        this.achievements.add(ach.id);
                        this.showAchievement(ach.text);
                    }
                });
            }

            showAchievement(text) {
                const popup = document.getElementById('achievement');
                document.getElementById('achievement-text').textContent = text;
                popup.classList.add('show');
                setTimeout(() => popup.classList.remove('show'), 3000);
            }

            showCombo(multiplier) {
                const combo = document.getElementById('combo');
                combo.textContent = `COMBO x${multiplier}!`;
                combo.classList.add('show');
                setTimeout(() => combo.classList.remove('show'), 1000);
            }

            victory() {
                this.victoryAchieved = true;
                const prestigeGain = Math.floor(Math.pow(100, 1.5) / 5);
                document.getElementById('final-score').textContent = this.formatNumber(this.coins);
                document.getElementById('victory-prestige').textContent = prestigeGain;
                document.getElementById('victory').classList.add('active');
                this.createFireworks();
            }

            continueAfterVictory() {
                document.getElementById('victory').classList.remove('active');
                this.prestigePoints += Math.floor(Math.pow(100, 1.5) / 5);
                this.prestigeMultiplier += Math.floor(Math.pow(100, 1.5) / 5) * 0.1;
            }

            showFloatingText(text, x, y, color) {
                const el = document.createElement('div');
                el.className = 'floating-text';
                el.textContent = text;
                el.style.left = x + 'px';
                el.style.top = y + 'px';
                el.style.color = color;
                document.body.appendChild(el);
                setTimeout(() => el.remove(), 1200);
            }

            createParticles(x, y) {
                for (let i = 0; i < 25; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.left = x + 'px';
                    particle.style.top = y + 'px';
                    const angle = (Math.PI * 2 * i) / 25;
                    const velocity = 50 + Math.random() * 100;
                    particle.style.setProperty('--tx', Math.cos(angle) * velocity + 'px');
                    particle.style.setProperty('--ty', Math.sin(angle) * velocity + 'px');
                    particle.style.background = `hsl(${Math.random() * 360}, 100%, 60%)`;
                    particle.style.boxShadow = `0 0 10px ${particle.style.background}`;
                    document.body.appendChild(particle);
                    setTimeout(() => particle.remove(), 1200);
                }
            }

            createFireworks() {
                const interval = setInterval(() => {
                    if (!document.getElementById('victory').classList.contains('active')) {
                        clearInterval(interval);
                        return;
                    }
                    const x = Math.random() * window.innerWidth;
                    const y = Math.random() * window.innerHeight;
                    this.createParticles(x, y);
                }, 300);
            }

            updateUI() {
                document.getElementById('coins').textContent = this.formatNumber(this.coins);
                document.getElementById('exp').textContent = this.formatNumber(this.exp);
                document.getElementById('max-level').textContent = this.maxLevel;
                document.getElementById('prestige-points').textContent = this.prestigePoints;
                document.getElementById('income-display').textContent = this.formatNumber(this.getIncome());
                
                const coinProgress = Math.min(100, (this.coins / (this.coins + 10000)) * 100);
                document.getElementById('coin-progress').style.width = coinProgress + '%';
                
                const expProgress = Math.min(100, (this.exp / (this.exp + 1000)) * 100);
                document.getElementById('exp-progress').style.width = expProgress + '%';
                
                document.getElementById('slot-cost').textContent = this.formatNumber(this.costs.slot);
                document.getElementById('boost-cost').textContent = this.formatNumber(this.costs.boost);
                document.getElementById('auto-merge-btn').innerHTML = 
                    this.autoMergeUnlocked ? 'âœ… ĞĞ²Ñ‚Ğ¾-ÑĞ»Ğ¸ÑĞ½Ğ¸Ğµ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾' : `ğŸ¤– ĞĞ²Ñ‚Ğ¾-ÑĞ»Ğ¸ÑĞ½Ğ¸Ğµ (${this.formatNumber(this.costs.autoMerge)}ğŸ’°)`;
                document.getElementById('crit-cost').textContent = this.formatNumber(this.costs.crit);
                document.getElementById('warp-cost').textContent = this.formatNumber(this.costs.warp);
                
                const spawnBtn = document.getElementById('spawn-btn');
                spawnBtn.disabled = this.items.length >= this.slots || this.coins < 10;
                
                const autoMergeBtn = document.getElementById('auto-merge-btn');
                autoMergeBtn.disabled = this.autoMergeUnlocked || this.coins < this.costs.autoMerge;
                
                document.getElementById('shop-slot').className = 
                    'shop-item' + (this.coins < this.costs.slot ? ' disabled' : '');
                document.getElementById('shop-boost').className = 
                    'shop-item' + (this.coins < this.costs.boost ? ' disabled' : '');
                document.getElementById('shop-crit').className = 
                    'shop-item' + (this.coins < this.costs.crit || this.criticalChance >= 0.5 ? ' disabled' : '');
                document.getElementById('shop-warp').className = 
                    'shop-item' + (this.coins < this.costs.warp ? ' disabled' : '');
            }

            render() {
                this.updateUI();
                
                const container = document.getElementById('game-area');
                container.innerHTML = '';
                
                this.items.forEach((item, index) => {
                    const div = document.createElement('div');
                    div.className = 'item';
                    if (index === this.selectedIndex) div.classList.add('selected');
                    if (item.level >= 100) div.classList.add('max-level');
                    
                    div.style.background = this.getItemColor(item.level);
                    div.dataset.index = index;
                    
                    const income = Math.pow(1.8, item.level - 1) * (1 + item.level * 0.1) * this.incomeMultiplier * this.prestigeMultiplier;
                    
                    div.innerHTML = `
                        <div class="item-icon">${this.getItemEmoji(item.level)}</div>
                        <div class="item-level">${item.level}</div>
                        <div class="item-income">${this.formatNumber(income)}/Ñ</div>
                    `;
                    
                    div.onclick = () => this.selectItem(index);
                    container.appendChild(div);
                });
                
                for (let i = this.items.length; i < this.slots; i++) {
                    const div = document.createElement('div');
                    div.className = 'item';
                    div.style.background = 'rgba(255,255,255,0.03)';
                    div.style.border = '2px dashed rgba(255,255,255,0.15)';
                    div.style.cursor = 'default';
                    div.innerHTML = '<div style="opacity: 0.2; font-size: 2em;">+</div>';
                    container.appendChild(div);
                }
            }
        }

        const game = new Game();

        window.addEventListener('resize', () => {
            const canvas = document.getElementById('particles');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
    </script>
</body>
</html>
